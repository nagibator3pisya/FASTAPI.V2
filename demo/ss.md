## Подробное объяснение настроек безопасности

`SECRET_KEY` — секретный ключ для подписи JWT токенов. Это критически важный параметр безопасности. В продакшене должен быть длинным, 
случайным и храниться в переменных окружения. Рекомендуется использовать минимум 32 символа.
Хранение в env файле

```python
SECRETS = `j9lYimfQApvX4S1xv6POyiMEgaiAQpsmFGjegJfQ4a0`
```




`ALGORITHM` — алгоритм подписи токенов. HS256 (HMAC с SHA-256) — наиболее распространённый и безопасный алгоритм для JWT. Альтернативы: RS256 (RSA), ES256 (ECDSA).

`ACCESS_TOKEN_EXPIRE_MINUTES` — время жизни токена доступа в минутах. Короткое время жизни (15-60 минут) повышает безопасность, но требует частого обновления токенов.

`pwd_context` — контекст для хэширования паролей. Использует bcrypt — один из самых безопасных алгоритмов хэширования паролей. Параметр deprecated="auto" автоматически обновляет устаревшие хэши.

`oauth2_scheme` — схема OAuth2 для получения токена из заголовка Authorization. Указывает URL эндпоинта для получения токена.


## Функции для работы с паролями

`verify_password(plain_password, hashed_password)` — проверяет соответствие открытого пароля его хэшу. Использует безопасные алгоритмы сравнения, устойчивые к timing attacks.

`get_password_hash(password)` — создаёт безопасный хэш пароля с использованием bcrypt. Включает соль (salt) для защиты от rainbow table атак.


## Функции для работы с JWT токенами


`create_access_token(data, expires_delta)` — создаёт JWT токен с указанными данными и временем жизни. Процесс создания токена:

Копирование данных пользователя
Добавление времени истечения токена
Подпись токена секретным ключом
Кодирование в base64


`verify_token(token, credentials_exception)` — проверяет и декодирует JWT токен. Выполняет следующие проверки:

Валидность подписи токена
Наличие обязательных полей (например, sub для субъекта)
Время жизни токена (проверяется автоматически)


## Зависимости для защиты эндпоинтов
`get_current_user()` — зависимость, которая извлекает текущего пользователя из JWT токена. Процесс работы:

-Получение токена из заголовка Authorization
-Проверка и декодирование токена
-Поиск пользователя в базе данных
-Возврат объекта пользователя или ошибки аутентификации


`get_current_active_user()` — дополнительная проверка активности пользователя. Позволяет деактивировать пользователей без их удаления из базы данных.